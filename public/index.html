<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attribution de chambres</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        h1 {
            font-size: 2rem;
            color: #333;
        }

        .stats {
            font-size: 1.1rem;
            color: #666;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
            font-size: 0.75rem;
            padding: 6px 12px;
        }

        .admin-panel {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .inscription-form {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .member-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .member-row {
            display: flex;
            gap: 10px;
        }

        .member-row select {
            flex: 1;
        }

        .rooms-grid {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .room-type-section {
            margin-bottom: 40px;
        }

        .room-type-title {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .rooms-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .room-card {
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }

        .room-card.available {
            background: #f0fdf4;
            border-color: #86efac;
        }

        .room-card.full {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .room-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .room-title {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
        }

        .badge-female {
            background: #fce7f3;
            color: #be185d;
        }

        .badge-mixed {
            background: #e5e7eb;
            color: #6b7280;
        }

        .occupants-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .occupant-item {
            background: white;
            padding: 10px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }

        .empty-bed {
            background: white;
            padding: 10px;
            border-radius: 6px;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-block {
            width: 100%;
        }

        .participant-list {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .participant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #e5e7eb;
        }

        .participant-item:last-child {
            border-bottom: none;
        }

        .participant-item input {
            flex: 1;
            margin-right: 10px;
        }

        .participant-actions {
            display: flex;
            gap: 5px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.5rem;
            color: white;
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <div class="loading">‚è≥ Chargement...</div>
    </div>

    <script>
        let appData = { rooms: [], participants: [], registrationCodes: {} };
        let isAdmin = false;
        let roomToModify = null;

        // Load data
        async function loadData() {
            try {
                const response = await fetch('/api/data');
                appData = await response.json();
                renderApp();
            } catch (error) {
                alert('Erreur de chargement : ' + error.message);
            }
        }

        // Assign group
        async function assignGroup() {
            const roomId = document.getElementById('roomSelect').value;
            if (!roomId) {
                alert('Veuillez s√©lectionner une chambre');
                return;
            }

            const selects = document.querySelectorAll('.member-select');
            const members = Array.from(selects).map(s => s.value).filter(m => m);

            if (members.length === 0) {
                alert('Veuillez s√©lectionner au moins un participant');
                return;
            }

            try {
                const response = await fetch('/api/assign', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ roomId, members })
                });

                const result = await response.json();
                
                if (!response.ok) {
                    alert(result.error);
                    return;
                }

                appData = result.data;
                renderApp();
                alert(`Inscription r√©ussie !\n\n‚ö†Ô∏è NOTEZ BIEN CE CODE : ${result.code}\n\nVous en aurez besoin pour modifier votre chambre.`);
            } catch (error) {
                alert('Erreur : ' + error.message);
            }
        }

        // Modify registration
        async function initiateModification(roomId) {
            roomToModify = roomId;
            showModal('modificationModal');
        }

        async function confirmModification() {
            const code = document.getElementById('modificationCodeInput').value;
            
            if (!confirm('‚ö†Ô∏è Supprimer l\'ensemble du groupe de cette chambre et se r√©inscrire dans une autre ?')) {
                return;
            }
            
            try {
                const response = await fetch('/api/modify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ roomId: roomToModify, code })
                });

                const result = await response.json();
                
                if (!response.ok) {
                    alert(result.error);
                    return;
                }

                appData = result.data;
                hideModal('modificationModal');
                
                // Pre-fill form with selects
                const container = document.getElementById('memberInputs');
                container.innerHTML = result.groupMembers.map((m, i) => `
                    <div class="member-row">
                        <select class="member-select">
                            <option value="">-- Choisir un participant --</option>
                            ${getAvailableParticipants().map(p => `
                                <option value="${p}" ${p === m ? 'selected' : ''}>${p}</option>
                            `).join('')}
                        </select>
                        ${i > 0 ? '<button class="btn btn-danger" onclick="removeMemberRow(this)">üóëÔ∏è</button>' : ''}
                    </div>
                `).join('');

                renderApp();
                alert(`Groupe retir√© de la chambre n¬∞${roomToModify}.\nVous pouvez maintenant choisir une nouvelle chambre.`);
            } catch (error) {
                alert('Erreur : ' + error.message);
            }
        }

        // Admin functions
        async function toggleAdminMode() {
            if (isAdmin) {
                isAdmin = false;
                renderApp();
            } else {
                showModal('adminLoginModal');
            }
        }

        function loginAdmin() {
            const password = document.getElementById('adminPasswordInput').value;
            if (password === 'adminlvp25') {
                isAdmin = true;
                hideModal('adminLoginModal');
                renderApp();
            } else {
                alert('Code incorrect !');
            }
        }

        async function removeOccupant(roomId, occupant) {
            if (!confirm(`Retirer ${occupant} de cette chambre ?`)) return;

            const password = prompt('Code admin :');
            
            try {
                const response = await fetch('/api/admin/remove', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ roomId, occupant, password })
                });

                const result = await response.json();
                
                if (!response.ok) {
                    alert(result.error);
                    return;
                }

                appData = result.data;
                renderApp();
            } catch (error) {
                alert('Erreur : ' + error.message);
            }
        }

        async function toggleFemaleOnly(roomId) {
            const password = prompt('Code admin :');
            
            try {
                const response = await fetch('/api/admin/toggle-female', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ roomId, password })
                });

                const result = await response.json();
                
                if (!response.ok) {
                    alert(result.error);
                    return;
                }

                appData = result.data;
                renderApp();
            } catch (error) {
                alert('Erreur : ' + error.message);
            }
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (e) => {
                const text = e.target.result;
                const lines = text.split('\n').filter(line => line.trim());
                const participants = lines.slice(1).map(line => {
                    const cols = line.split(/[,;\t]/);
                    return cols[0]?.trim();
                }).filter(name => name && name.length > 0);
                
                const password = prompt('Code admin :');
                
                try {
                    const response = await fetch('/api/admin/upload-participants', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ participants, password })
                    });

                    const result = await response.json();
                    
                    if (!response.ok) {
                        alert(result.error);
                        return;
                    }

                    appData = result.data;
                    renderApp();
                    alert(`${participants.length} participants import√©s !`);
                } catch (error) {
                    alert('Erreur : ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        function exportResults() {
            let csv = 'Chambre,Type,Capacit√©,Occupants,Femmes Seulement\n';
            appData.rooms.forEach(room => {
                csv += `${room.id},${room.type},${room.capacity},"${room.occupants.join('; ')}",${room.isFemaleOnly ? 'Oui' : 'Non'}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'attributions_chambres.csv';
            a.click();
        }

        // UI helpers
        function showModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function hideModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function addMemberInput() {
            const container = document.getElementById('memberInputs');
            const div = document.createElement('div');
            div.className = 'member-row';
            div.innerHTML = `
                <select class="member-select">
                    <option value="">-- Choisir un participant --</option>
                    ${getAvailableParticipants().map(p => `
                        <option value="${p}">${p}</option>
                    `).join('')}
                </select>
                <button class="btn btn-danger" onclick="removeMemberRow(this)">üóëÔ∏è</button>
            `;
            container.appendChild(div);
        }

        function removeMemberRow(btn) {
            btn.parentElement.remove();
        }

        function getAvailableParticipants() {
            // Get all assigned participants
            const assignedParticipants = new Set();
            appData.rooms.forEach(room => {
                room.occupants.forEach(occupant => assignedParticipants.add(occupant));
            });

            // Get currently selected participants in form
            const selects = document.querySelectorAll('.member-select');
            const selectedInForm = new Set(
                Array.from(selects).map(s => s.value).filter(v => v)
            );

            // Return participants not assigned and not already selected in form
            return appData.participants.filter(p => !assignedParticipants.has(p));
        }

        function updateMemberSelects() {
            const selects = document.querySelectorAll('.member-select');
            const available = getAvailableParticipants();
            
            selects.forEach(select => {
                const currentValue = select.value;
                const selectedValues = Array.from(selects)
                    .map(s => s.value)
                    .filter(v => v && v !== currentValue);

                select.innerHTML = `
                    <option value="">-- Choisir un participant --</option>
                    ${available.filter(p => !selectedValues.includes(p)).map(p => `
                        <option value="${p}" ${p === currentValue ? 'selected' : ''}>${p}</option>
                    `).join('')}
                `;
            });
        }

        // Admin participant management
        function addParticipant() {
            const name = prompt('Nom du nouveau participant :');
            if (!name || !name.trim()) return;

            if (appData.participants.includes(name.trim())) {
                alert('Ce participant existe d√©j√† !');
                return;
            }

            appData.participants.push(name.trim());
            appData.participants.sort();
            saveParticipants();
        }

        function editParticipant(oldName, index) {
            const newName = prompt('Modifier le nom :', oldName);
            if (!newName || !newName.trim() || newName === oldName) return;

            if (appData.participants.includes(newName.trim())) {
                alert('Ce nom existe d√©j√† !');
                return;
            }

            // Check if participant is already assigned
            const isAssigned = appData.rooms.some(r => r.occupants.includes(oldName));
            if (isAssigned) {
                if (!confirm(`‚ö†Ô∏è ${oldName} est d√©j√† inscrit dans une chambre.\nLe modifier mettra √† jour son inscription. Continuer ?`)) {
                    return;
                }
                // Update in rooms
                appData.rooms.forEach(room => {
                    const idx = room.occupants.indexOf(oldName);
                    if (idx !== -1) {
                        room.occupants[idx] = newName.trim();
                    }
                });
                // Update in registration codes
                if (appData.registrationCodes[oldName]) {
                    appData.registrationCodes[newName.trim()] = appData.registrationCodes[oldName];
                    delete appData.registrationCodes[oldName];
                }
            }

            appData.participants[index] = newName.trim();
            appData.participants.sort();
            saveParticipants();
        }

        function deleteParticipant(name, index) {
            // Check if participant is already assigned
            const isAssigned = appData.rooms.some(r => r.occupants.includes(name));
            if (isAssigned) {
                alert(`‚ùå Impossible de supprimer ${name} car il/elle est d√©j√† inscrit(e) dans une chambre.\nRetirez-le d'abord de sa chambre.`);
                return;
            }

            if (!confirm(`Supprimer ${name} de la liste ?`)) return;

            appData.participants.splice(index, 1);
            saveParticipants();
        }

        async function saveParticipants() {
            const password = prompt('Code admin :');
            
            try {
                const response = await fetch('/api/admin/update-participants', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ participants: appData.participants, password })
                });

                const result = await response.json();
                
                if (!response.ok) {
                    alert(result.error);
                    loadData(); // Reload to restore previous state
                    return;
                }

                appData = result.data;
                alert('‚úÖ Liste des participants sauvegard√©e !');
                renderApp();
            } catch (error) {
                alert('Erreur : ' + error.message);
                loadData(); // Reload to restore previous state
            }
        }

        // Render
        function renderApp() {
            const totalOccupied = appData.rooms.reduce((sum, r) => sum + r.occupants.length, 0);
            const availableRooms = appData.rooms.filter(r => r.occupants.length < r.capacity);
            
            // Custom sort order for rooms
            const roomOrder = ['2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','25','26','C','E','G','I'];
            const sortedRooms = [...appData.rooms].sort((a, b) => {
                return roomOrder.indexOf(a.id) - roomOrder.indexOf(b.id);
            });
            
            const grouped = {};
            sortedRooms.forEach(room => {
                if (!grouped[room.type]) grouped[room.type] = [];
                grouped[room.type].push(room);
            });

            // Display in specific order
            const typeOrder = ['2 lits', '6 lits', '5 lits', '3 lits'];

            document.getElementById('app').innerHTML = `
                <div class="header">
                    <div class="header-content">
                        <div>
                            <h1>üë• Attribution de chambres</h1>
                            <p class="stats">${totalOccupied} / 106 participants inscrits</p>
                        </div>
                        <button class="btn btn-primary" onclick="toggleAdminMode()">
                            üîê ${isAdmin ? 'Quitter Admin' : 'Mode Admin'}
                        </button>
                    </div>
                </div>

                <div class="admin-panel ${isAdmin ? 'active' : ''}">
                    <h2 style="margin-bottom: 15px;">Administration</h2>
                    <div class="admin-controls">
                        <label class="btn btn-primary" style="cursor: pointer;">
                            üì§ Importer Excel/CSV
                            <input type="file" accept=".csv,.xlsx,.xls,.txt" onchange="handleFileUpload(event)" style="display: none;">
                        </label>
                        <button class="btn btn-success" onclick="exportResults()">
                            üì• Exporter les r√©sultats
                        </button>
                        <div style="padding: 12px 24px; background: white; border-radius: 8px; font-weight: 600;">
                            ${appData.participants.length} participants charg√©s
                        </div>
                    </div>

                    <div class="participant-list">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="margin: 0;">Liste des participants</h3>
                            <button class="btn btn-primary btn-small" onclick="addParticipant()">
                                ‚ûï Ajouter
                            </button>
                        </div>
                        ${appData.participants.length === 0 ? `
                            <p style="text-align: center; color: #666; padding: 20px;">
                                Aucun participant. Importez un fichier CSV ou ajoutez-les manuellement.
                            </p>
                        ` : `
                            ${appData.participants.map((p, index) => {
                                const isAssigned = appData.rooms.some(r => r.occupants.includes(p));
                                return `
                                    <div class="participant-item">
                                        <span style="${isAssigned ? 'color: #10b981; font-weight: 600;' : ''}">
                                            ${p} ${isAssigned ? '‚úì Inscrit' : ''}
                                        </span>
                                        <div class="participant-actions">
                                            <button class="btn btn-primary btn-small" onclick="editParticipant('${p.replace(/'/g, "\\'")}', ${index})">
                                                ‚úèÔ∏è Modifier
                                            </button>
                                            <button class="btn btn-danger btn-small" onclick="deleteParticipant('${p.replace(/'/g, "\\'")}', ${index})">
                                                üóëÔ∏è
                                            </button>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        `}
                    </div>
                </div>

                ${!isAdmin ? `
                <div class="inscription-form">
                    <h2 style="margin-bottom: 20px;">Inscription</h2>
                    
                    <div class="form-group">
                        <label>S√©lectionnez une chambre disponible</label>
                        <select id="roomSelect">
                            <option value="">-- Choisir une chambre --</option>
                            ${availableRooms.sort((a, b) => {
                                const order = ['2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','25','26','C','E','G','I'];
                                return order.indexOf(a.id) - order.indexOf(b.id);
                            }).map(room => `
                                <option value="${room.id}">
                                    Chambre n¬∞${room.id} (${room.type}) - ${room.capacity - room.occupants.length} places restantes
                                    ${room.isFemaleOnly ? ' üö∫ FEMMES' : ''}
                                </option>
                            `).join('')}
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Membres du groupe</label>
                        <div class="member-inputs" id="memberInputs">
                            <div class="member-row">
                                <select class="member-select" onchange="updateMemberSelects()">
                                    <option value="">-- Choisir un participant --</option>
                                    ${getAvailableParticipants().map(p => `
                                        <option value="${p}">${p}</option>
                                    `).join('')}
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="addMemberInput(); updateMemberSelects();" style="margin-top: 10px;">
                            ‚ûï Ajouter un membre
                        </button>
                    </div>

                    <button class="btn btn-success btn-block" onclick="assignGroup()">
                        Confirmer l'inscription
                    </button>
                </div>
                ` : ''}

                ${typeOrder.map(type => {
                    if (!grouped[type]) return '';
                    const rooms = grouped[type];
                    return `
                    <div class="rooms-grid">
                        <h2 class="room-type-title">Chambres ${type} (${rooms.length} chambres)</h2>
                        <div class="rooms-container">
                            ${rooms.map(room => `
                                <div class="room-card ${room.occupants.length === room.capacity ? 'full' : 'available'}">
                                    <div class="room-header">
                                        <div>
                                            <div class="room-title">Chambre n¬∞${room.id}</div>
                                            <div style="font-size: 0.9rem; color: #666;">${room.occupants.length} / ${room.capacity} personnes</div>
                                        </div>
                                        <div style="display: flex; gap: 5px; flex-direction: column;">
                                            ${isAdmin ? `
                                                <button class="badge ${room.isFemaleOnly ? 'badge-female' : 'badge-mixed'}" onclick="toggleFemaleOnly('${room.id}')">
                                                    ${room.isFemaleOnly ? 'üö∫ FEMMES' : 'Mixte'}
                                                </button>
                                            ` : room.isFemaleOnly ? `
                                                <span class="badge badge-female">üö∫ FEMMES</span>
                                            ` : ''}
                                            ${!isAdmin && room.occupants.length > 0 ? `
                                                <button class="btn btn-warning" onclick="initiateModification('${room.id}')">
                                                    üóëÔ∏è Supprimer mon groupe
                                                </button>
                                            ` : ''}
                                        </div>
                                    </div>
                                    <div class="occupants-list">
                                        ${room.occupants.map(occupant => `
                                            <div class="occupant-item">
                                                <span>${occupant}</span>
                                                ${isAdmin ? `
                                                    <button onclick="removeOccupant('${room.id}', '${occupant}')" style="background: none; border: none; color: #ef4444; cursor: pointer;">
                                                        üóëÔ∏è
                                                    </button>
                                                ` : ''}
                                            </div>
                                        `).join('')}
                                        ${Array(room.capacity - room.occupants.length).fill(null).map(() => `
                                            <div class="empty-bed">Lit disponible</div>
                                        `).join('')}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    `;
                }).join('')}

                <!-- Modals -->
                <div class="modal" id="adminLoginModal">
                    <div class="modal-content">
                        <h2 style="margin-bottom: 20px;">Connexion Admin</h2>
                        <input type="password" id="adminPasswordInput" placeholder="Code admin" style="margin-bottom: 20px;" onkeypress="if(event.key==='Enter') loginAdmin()">
                        <div class="modal-buttons">
                            <button class="btn btn-primary" style="flex: 1;" onclick="loginAdmin()">Connexion</button>
                            <button class="btn btn-danger" style="flex: 1;" onclick="hideModal('adminLoginModal')">Annuler</button>
                        </div>
                    </div>
                </div>

                <div class="modal" id="modificationModal">
                    <div class="modal-content">
                        <h2 style="margin-bottom: 20px;">Modifier votre inscription</h2>
                        <p style="color: #666; margin-bottom: 20px;">Entrez le code re√ßu lors de votre inscription.</p>
                        <input type="text" id="modificationCodeInput" placeholder="CODE (ex: AB12CD)" maxlength="6" style="text-transform: uppercase; margin-bottom: 20px;" onkeypress="if(event.key==='Enter') confirmModification()">
                        <div class="modal-buttons">
                            <button class="btn btn-primary" style="flex: 1;" onclick="confirmModification()">Confirmer</button>
                            <button class="btn btn-danger" style="flex: 1;" onclick="hideModal('modificationModal')">Annuler</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize
        loadData();
    </script>
</body>
</html>
